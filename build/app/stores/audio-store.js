"use strict";var _classCallCheck=require("babel-runtime/helpers/class-call-check")["default"],_inherits=require("babel-runtime/helpers/inherits")["default"],_createClass=require("babel-runtime/helpers/create-class")["default"],_core=require("babel-runtime/core-js")["default"],_interopRequire=require("babel-runtime/helpers/interop-require")["default"],StoreBase=_interopRequire(require("meepworks/store-base")),InitAudio=_interopRequire(require("../actions/init-audio")),LoadAudio=_interopRequire(require("../actions/load-audio")),PlayAudio=_interopRequire(require("../actions/play-audio")),DATA=_core.Symbol(),AudioStore=function(e){function i(){_classCallCheck(this,i),this.rehydrate()}return _inherits(i,e),_createClass(i,{rehydrate:{value:function(){this[DATA]={loaded:!1}}},dehydrate:{value:function(){return null}},handleInitAudio:{value:function(){this[DATA].ctx=new AudioContext}},handleLoadAudio:{value:function(e){this[DATA].buffers=e,this[DATA].loaded=!0}},handlePlayAudio:{value:function(e){if(this[DATA].loaded){var i=this[DATA].ctx.createBufferSource();i.buffer=this[DATA].buffers[e],i.connect(this[DATA].ctx.destination),i.start(0)}}},handlers:{get:function(){return[{action:InitAudio.symbol,handler:this.handleInitAudio},{action:LoadAudio.symbol,handler:this.handleLoadAudio},{action:PlayAudio.symbol,handler:this.handlePlayAudio}]}}}),i}(StoreBase);module.exports=AudioStore;