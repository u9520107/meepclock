"use strict";var _interopRequire=require("babel-runtime/helpers/interop-require")["default"],React=_interopRequire(require("react")),TimeStore=_interopRequire(require("./stores/time-store")),SetFocustimes=_interopRequire(require("./actions/set-focustimes")),UpdateTime=_interopRequire(require("./actions/update-time"));require("normalize.css/normalize.css!");var styles=_interopRequire(require("./app-styles")),m=require("meepworks/styles").merge,_libClock=require("./lib/clock"),ClockFace=_libClock.ClockFace,Clock=_libClock.Clock,AudioStore=_interopRequire(require("./stores/audio-store")),InitAudio=_interopRequire(require("./actions/init-audio")),LoadAudio=_interopRequire(require("./actions/load-audio")),PlayAudio=_interopRequire(require("./actions/play-audio")),focusImgA=_interopRequire(require("./assets/images/focus-a.png!asset")),focusImgD=_interopRequire(require("./assets/images/focus-d.png!asset")),coopImg=_interopRequire(require("./assets/images/cooperation.png!asset")),coopLogoImg=_interopRequire(require("./assets/images/cooperation-logo.png!asset")),App=React.createClass({displayName:"App",getInitialState:function(){return this.getStates()},componentDidMount:function(){TimeStore.getInstance().on("change",this.handleChange),requestAnimationFrame(this.triggerUpdateTime),(new InitAudio).exec().then(function(){return(new LoadAudio).exec()})},componentWillUnmount:function(){TimeStore.getInstance().off("change",this.handleChange)},shouldComponentUpdate:function(e,t){var o=t.time.get("focus"),s=this.state.time.get("focus");return o!==s&&new PlayAudio(o?"start":"end").exec(),t.time!==this.state.time},handleChange:function(){this.replaceState(this.getStates())},triggerUpdateTime:function(){var e=this;(new UpdateTime).exec().then(function(){e.isMounted()&&requestAnimationFrame(e.triggerUpdateTime)})},getStates:function(){return{time:TimeStore.state}},render:function(){var e=this.state.time.get("focus");return React.createElement("div",{className:"app-contaier"},React.createElement("div",{className:"app-content",style:m(styles.app)},React.createElement("div",{key:"focus",style:m(styles.background,styles.focusColor)},React.createElement("div",{key:"focus-background",style:m(styles.focusBackground)}),React.createElement("img",{key:"focus-egg",src:focusImgA,style:m(styles.focusEgg,!e&&styles.focusEggTransform)}),React.createElement("img",{key:"focus-logo",src:focusImgD,style:m(styles.focusLogo,!e&&styles.focusLogoTransform)})),React.createElement("div",{key:"normal",style:m(styles.background,styles.normalColor,e&&styles.transparent)},React.createElement("img",{key:"cooperation",src:coopImg,style:m(styles.cooperation,e&&styles.cooperationTransform)}),React.createElement("img",{key:"cooperation-logo",src:coopLogoImg,style:m(styles.cooperationLogo,e&&styles.cooperationLogoTransform)})),React.createElement("div",{className:"clock-container",style:m(styles.clockContainer,!e&&styles.clockCasual)},React.createElement(ClockFace,null),React.createElement(Clock,{now:this.state.time.get("now")}))))}});module.exports={component:App,stores:[TimeStore,AudioStore],initialActions:[{action:SetFocustimes,payload:["9:30~10:30","11:00~12:00","16:52~16:53"]}],routes:{"/":{name:"home",title:"Meepshop Clock"}}};