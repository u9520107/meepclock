"use strict";var _Object$defineProperty=require("babel-runtime/core-js/object/define-property")["default"],_interopRequireDefault=require("babel-runtime/helpers/interop-require-default")["default"];_Object$defineProperty(exports,"__esModule",{value:!0});var _React=require("react"),_React2=_interopRequireDefault(_React),_TimeStore=require("./stores/time-store"),_TimeStore2=_interopRequireDefault(_TimeStore),_SetFocustimes=require("./actions/set-focustimes"),_SetFocustimes2=_interopRequireDefault(_SetFocustimes),_UpdateTime=require("./actions/update-time"),_UpdateTime2=_interopRequireDefault(_UpdateTime);require("normalize.css/normalize.css!");var _styles=require("./app-styles"),_styles2=_interopRequireDefault(_styles),_m=require("meepworks/styles"),_ClockFace$Clock=require("./lib/clock"),_AudioStore=require("./stores/audio-store"),_AudioStore2=_interopRequireDefault(_AudioStore),_InitAudio=require("./actions/init-audio"),_InitAudio2=_interopRequireDefault(_InitAudio),_LoadAudio=require("./actions/load-audio"),_LoadAudio2=_interopRequireDefault(_LoadAudio),_PlayAudio=require("./actions/play-audio"),_PlayAudio2=_interopRequireDefault(_PlayAudio),_ClientInit=require("./actions/client-init"),_ClientInit2=_interopRequireDefault(_ClientInit),_focusImgA=require("./assets/images/focus-a.png!asset"),_focusImgA2=_interopRequireDefault(_focusImgA),_focusImgD=require("./assets/images/focus-d.png!asset"),_focusImgD2=_interopRequireDefault(_focusImgD),_coopImg=require("./assets/images/cooperation.png!asset"),_coopImg2=_interopRequireDefault(_coopImg),_coopLogoImg=require("./assets/images/cooperation-logo.png!asset"),_coopLogoImg2=_interopRequireDefault(_coopLogoImg),App=_React2["default"].createClass({displayName:"App",getInitialState:function(){return this.getStates()},componentDidMount:function(){var e=this;_TimeStore2["default"].getInstance().on("change",this.handleChange),(new _ClientInit2["default"]).exec().then(function(){requestAnimationFrame(e.triggerUpdateTime)}),(new _InitAudio2["default"]).exec().then(function(){return(new _LoadAudio2["default"]).exec()})},componentWillUnmount:function(){_TimeStore2["default"].getInstance().off("change",this.handleChange)},shouldComponentUpdate:function(e,t){var o=t.time.get("focus"),a=this.state.time.get("focus");return o!==a&&new _PlayAudio2["default"](o?"start":"end").exec(),t.time!==this.state.time},handleChange:function(){this.replaceState(this.getStates())},triggerUpdateTime:function(){var e=this;(new _UpdateTime2["default"]).exec().then(function(){e.isMounted()&&requestAnimationFrame(e.triggerUpdateTime)})},getStates:function(){return{time:_TimeStore2["default"].state}},render:function(){var e=this.state.time.get("focus");return _React2["default"].createElement("div",{className:"app-contaier"},_React2["default"].createElement("div",{className:"app-content",style:_m.merge(_styles2["default"].app)},_React2["default"].createElement("div",{key:"focus",style:_m.merge(_styles2["default"].background,_styles2["default"].focusColor)},_React2["default"].createElement("div",{key:"focus-background",style:_m.merge(_styles2["default"].focusBackground)}),_React2["default"].createElement("img",{key:"focus-egg",src:_focusImgA2["default"],style:_m.merge(_styles2["default"].focusEgg,!e&&_styles2["default"].focusEggTransform)}),_React2["default"].createElement("img",{key:"focus-logo",src:_focusImgD2["default"],style:_m.merge(_styles2["default"].focusLogo,!e&&_styles2["default"].focusLogoTransform)})),_React2["default"].createElement("div",{key:"normal",style:_m.merge(_styles2["default"].background,_styles2["default"].normalColor,e&&_styles2["default"].transparent)},_React2["default"].createElement("img",{key:"cooperation",src:_coopImg2["default"],style:_m.merge(_styles2["default"].cooperation,e&&_styles2["default"].cooperationTransform)}),_React2["default"].createElement("img",{key:"cooperation-logo",src:_coopLogoImg2["default"],style:_m.merge(_styles2["default"].cooperationLogo,e&&_styles2["default"].cooperationLogoTransform)})),_React2["default"].createElement("div",{className:"clock-container",style:_m.merge(_styles2["default"].clockContainer,!e&&_styles2["default"].clockCasual)},_React2["default"].createElement(_ClockFace$Clock.ClockFace,null),_React2["default"].createElement(_ClockFace$Clock.Clock,{now:this.state.time.get("now")}))))}});exports["default"]={component:App,stores:[_TimeStore2["default"],_AudioStore2["default"]],initialActions:[{action:_SetFocustimes2["default"],payload:["9:30~10:30","11:00~12:00","14:00~15:00"]}],routes:{"/":{name:"home",title:"Meepshop Clock"}}},module.exports=exports["default"];