"use strict";var _regeneratorRuntime=require("babel-runtime/regenerator")["default"],_interopRequireDefault=require("babel-runtime/helpers/interop-require-default")["default"],_interopRequireWildcard=require("babel-runtime/helpers/interop-require-wildcard")["default"],_koa=require("koa"),_koa2=_interopRequireDefault(_koa),_router=require("koa-router"),_router2=_interopRequireDefault(_router),_favicon=require("koa-favicon"),_favicon2=_interopRequireDefault(_favicon),_mount=require("koa-mount"),_mount2=_interopRequireDefault(_mount),_serve=require("koa-static-cache"),_serve2=_interopRequireDefault(_serve),_gzip=require("koa-gzip"),_gzip2=_interopRequireDefault(_gzip),_path=require("path"),_path2=_interopRequireDefault(_path),_import=require("./config"),config=_interopRequireWildcard(_import),_debug=require("debug"),_debug2=_interopRequireDefault(_debug);require("./filter");var _MeepClock=require("./app/app"),_MeepClock2=_interopRequireDefault(_MeepClock),_AppDriver=require("meepworks/server-app-driver"),_AppDriver2=_interopRequireDefault(_AppDriver);_debug2["default"].enable("server-log");var log=_debug2["default"]("server-log"),server=_koa2["default"](),port=process.env.PORT||13352;server.use(_gzip2["default"]()),server.use(_favicon2["default"]()),server.use(_mount2["default"]("/build",_serve2["default"](_path2["default"].resolve(__dirname,"../build/"),{maxAge:3e5,dynamic:!0}))),server.use(_mount2["default"]("/bundle",_serve2["default"](_path2["default"].resolve(__dirname,"../bundle/"),{maxAge:3e5,dynamic:!0}))),server.use(_mount2["default"]("/jspm_packages",_serve2["default"](_path2["default"].resolve(__dirname,"../jspm_packages/"),{maxAge:3e5,dynamic:!0}))),server.use(_regeneratorRuntime.mark(function e(r){var t;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,r;case 3:log(this.req.url,""+((new Date).getTime()-t.getTime())+" ms");case 4:case"end":return e.stop()}},e,this)})),server.use(_mount2["default"]("/",new _AppDriver2["default"](_MeepClock2["default"],{appPath:"app/app",jspm:{path:"jspm_packages",config:"jspm_packages/config.js"},distPath:{external:"build",internal:"build"},fileRoot:__dirname,debug:config.debug,version:config.version}))),server.listen(port,function(){log("listening to "+port)});